import { Component, OnInit, ViewChild } from '@angular/core';
import { MatSnackBar } from '@angular/material/snack-bar';
import { ActivatedRoute } from '@angular/router';
import { Converter } from 'src/app/models/converter.model';
import { CustomDatePipe } from 'src/app/pipes/custom-date.pipe';
import { CurrencyConverterService } from 'src/app/services/currency-converter.service';
import { ConverterComponent } from '../converter/converter.component';

@Component({
  selector: 'app-currency-converstion-details',
  templateUrl: './currency-converstion-details.component.html',
  styleUrls: ['./currency-converstion-details.component.scss']
})
export class CurrencyConverstionDetailsComponent implements OnInit {
  @ViewChild('converterSelector') converterSelector: ConverterComponent;
  currentConverter: Converter;
  converterId: number;
  dataSource: Object;
  chartConfig: any = {
    width: '100%',
    height: '400',
    type: 'column2d',
    dataFormat: 'json',
  };
  newConverterChecked: boolean;
  dummyData = {
    "base": "EUR",
    "end_date": "2022-05-31",
    "rates": {
      "2021-05-31": {
        "USD": 1.22335
      },
      "2021-06-01": {
        "USD": 1.221755
      },
      "2021-06-02": {
        "USD": 1.22105
      },
      "2021-06-03": {
        "USD": 1.21315
      },
      "2021-06-04": {
        "USD": 1.216726
      },
      "2021-06-05": {
        "USD": 1.216655
      },
      "2021-06-06": {
        "USD": 1.21676
      },
      "2021-06-07": {
        "USD": 1.219074
      },
      "2021-06-08": {
        "USD": 1.217337
      },
      "2021-06-09": {
        "USD": 1.217732
      },
      "2021-06-10": {
        "USD": 1.217219
      },
      "2021-06-11": {
        "USD": 1.21085
      },
      "2021-06-12": {
        "USD": 1.210895
      },
      "2021-06-13": {
        "USD": 1.210984
      },
      "2021-06-14": {
        "USD": 1.212267
      },
      "2021-06-15": {
        "USD": 1.212561
      },
      "2021-06-16": {
        "USD": 1.199379
      },
      "2021-06-17": {
        "USD": 1.191472
      },
      "2021-06-18": {
        "USD": 1.18635
      },
      "2021-06-19": {
        "USD": 1.186435
      },
      "2021-06-20": {
        "USD": 1.187261
      },
      "2021-06-21": {
        "USD": 1.191207
      },
      "2021-06-22": {
        "USD": 1.19389
      },
      "2021-06-23": {
        "USD": 1.19294
      },
      "2021-06-24": {
        "USD": 1.192855
      },
      "2021-06-25": {
        "USD": 1.19375
      },
      "2021-06-26": {
        "USD": 1.19361
      },
      "2021-06-27": {
        "USD": 1.194158
      },
      "2021-06-28": {
        "USD": 1.192753
      },
      "2021-06-29": {
        "USD": 1.190048
      },
      "2021-06-30": {
        "USD": 1.18554
      },
      "2021-07-01": {
        "USD": 1.18458
      },
      "2021-07-02": {
        "USD": 1.186485
      },
      "2021-07-03": {
        "USD": 1.1865
      },
      "2021-07-04": {
        "USD": 1.185535
      },
      "2021-07-05": {
        "USD": 1.18645
      },
      "2021-07-06": {
        "USD": 1.182236
      },
      "2021-07-07": {
        "USD": 1.179322
      },
      "2021-07-08": {
        "USD": 1.184701
      },
      "2021-07-09": {
        "USD": 1.187775
      },
      "2021-07-10": {
        "USD": 1.1877
      },
      "2021-07-11": {
        "USD": 1.18728
      },
      "2021-07-12": {
        "USD": 1.186303
      },
      "2021-07-13": {
        "USD": 1.177461
      },
      "2021-07-14": {
        "USD": 1.183299
      },
      "2021-07-15": {
        "USD": 1.181192
      },
      "2021-07-16": {
        "USD": 1.180665
      },
      "2021-07-17": {
        "USD": 1.18054
      },
      "2021-07-18": {
        "USD": 1.181293
      },
      "2021-07-19": {
        "USD": 1.179296
      },
      "2021-07-20": {
        "USD": 1.178137
      },
      "2021-07-21": {
        "USD": 1.179238
      },
      "2021-07-22": {
        "USD": 1.17735
      },
      "2021-07-23": {
        "USD": 1.17713
      },
      "2021-07-24": {
        "USD": 1.17713
      },
      "2021-07-25": {
        "USD": 1.177274
      },
      "2021-07-26": {
        "USD": 1.180669
      },
      "2021-07-27": {
        "USD": 1.18209
      },
      "2021-07-28": {
        "USD": 1.184659
      },
      "2021-07-29": {
        "USD": 1.188983
      },
      "2021-07-30": {
        "USD": 1.186745
      },
      "2021-07-31": {
        "USD": 1.1867
      },
      "2021-08-01": {
        "USD": 1.186401
      },
      "2021-08-02": {
        "USD": 1.187345
      },
      "2021-08-03": {
        "USD": 1.186979
      },
      "2021-08-04": {
        "USD": 1.18371
      },
      "2021-08-05": {
        "USD": 1.183299
      },
      "2021-08-06": {
        "USD": 1.176319
      },
      "2021-08-07": {
        "USD": 1.17628
      },
      "2021-08-08": {
        "USD": 1.174807
      },
      "2021-08-09": {
        "USD": 1.173716
      },
      "2021-08-10": {
        "USD": 1.171914
      },
      "2021-08-11": {
        "USD": 1.174121
      },
      "2021-08-12": {
        "USD": 1.173647
      },
      "2021-08-13": {
        "USD": 1.17964
      },
      "2021-08-14": {
        "USD": 1.17964
      },
      "2021-08-15": {
        "USD": 1.179252
      },
      "2021-08-16": {
        "USD": 1.177854
      },
      "2021-08-17": {
        "USD": 1.17095
      },
      "2021-08-18": {
        "USD": 1.17039
      },
      "2021-08-19": {
        "USD": 1.167543
      },
      "2021-08-20": {
        "USD": 1.1697
      },
      "2021-08-21": {
        "USD": 1.1697
      },
      "2021-08-22": {
        "USD": 1.169508
      },
      "2021-08-23": {
        "USD": 1.174419
      },
      "2021-08-24": {
        "USD": 1.175367
      },
      "2021-08-25": {
        "USD": 1.177184
      },
      "2021-08-26": {
        "USD": 1.175496
      },
      "2021-08-27": {
        "USD": 1.17973
      },
      "2021-08-28": {
        "USD": 1.17954
      },
      "2021-08-29": {
        "USD": 1.17994
      },
      "2021-08-30": {
        "USD": 1.179655
      },
      "2021-08-31": {
        "USD": 1.180951
      },
      "2021-09-01": {
        "USD": 1.183996
      },
      "2021-09-02": {
        "USD": 1.187511
      },
      "2021-09-03": {
        "USD": 1.187905
      },
      "2021-09-04": {
        "USD": 1.18835
      },
      "2021-09-05": {
        "USD": 1.188559
      },
      "2021-09-06": {
        "USD": 1.18751
      },
      "2021-09-07": {
        "USD": 1.18445
      },
      "2021-09-08": {
        "USD": 1.181845
      },
      "2021-09-09": {
        "USD": 1.182453
      },
      "2021-09-10": {
        "USD": 1.18147
      },
      "2021-09-11": {
        "USD": 1.18147
      },
      "2021-09-12": {
        "USD": 1.181042
      },
      "2021-09-13": {
        "USD": 1.18095
      },
      "2021-09-14": {
        "USD": 1.180361
      },
      "2021-09-15": {
        "USD": 1.18185
      },
      "2021-09-16": {
        "USD": 1.176495
      },
      "2021-09-17": {
        "USD": 1.172525
      },
      "2021-09-18": {
        "USD": 1.17259
      },
      "2021-09-19": {
        "USD": 1.172882
      },
      "2021-09-20": {
        "USD": 1.172766
      },
      "2021-09-21": {
        "USD": 1.172257
      },
      "2021-09-22": {
        "USD": 1.168682
      },
      "2021-09-23": {
        "USD": 1.173978
      },
      "2021-09-24": {
        "USD": 1.172055
      },
      "2021-09-25": {
        "USD": 1.17201
      },
      "2021-09-26": {
        "USD": 1.172299
      },
      "2021-09-27": {
        "USD": 1.16957
      },
      "2021-09-28": {
        "USD": 1.168499
      },
      "2021-09-29": {
        "USD": 1.160364
      },
      "2021-09-30": {
        "USD": 1.157414
      },
      "2021-10-01": {
        "USD": 1.159549
      },
      "2021-10-02": {
        "USD": 1.159549
      },
      "2021-10-03": {
        "USD": 1.1608
      },
      "2021-10-04": {
        "USD": 1.16169
      },
      "2021-10-05": {
        "USD": 1.159602
      },
      "2021-10-06": {
        "USD": 1.155502
      },
      "2021-10-07": {
        "USD": 1.156066
      },
      "2021-10-08": {
        "USD": 1.157536
      },
      "2021-10-09": {
        "USD": 1.157536
      },
      "2021-10-10": {
        "USD": 1.156577
      },
      "2021-10-11": {
        "USD": 1.155435
      },
      "2021-10-12": {
        "USD": 1.15327
      },
      "2021-10-13": {
        "USD": 1.159804
      },
      "2021-10-14": {
        "USD": 1.159155
      },
      "2021-10-15": {
        "USD": 1.159911
      },
      "2021-10-16": {
        "USD": 1.159911
      },
      "2021-10-17": {
        "USD": 1.159676
      },
      "2021-10-18": {
        "USD": 1.161379
      },
      "2021-10-19": {
        "USD": 1.16319
      },
      "2021-10-20": {
        "USD": 1.165489
      },
      "2021-10-21": {
        "USD": 1.162517
      },
      "2021-10-22": {
        "USD": 1.164681
      },
      "2021-10-23": {
        "USD": 1.164681
      },
      "2021-10-24": {
        "USD": 1.1639
      },
      "2021-10-25": {
        "USD": 1.160881
      },
      "2021-10-26": {
        "USD": 1.15969
      },
      "2021-10-27": {
        "USD": 1.159978
      },
      "2021-10-28": {
        "USD": 1.168492
      },
      "2021-10-29": {
        "USD": 1.156103
      },
      "2021-10-30": {
        "USD": 1.156103
      },
      "2021-10-31": {
        "USD": 1.155809
      },
      "2021-11-01": {
        "USD": 1.159954
      },
      "2021-11-02": {
        "USD": 1.157809
      },
      "2021-11-03": {
        "USD": 1.161636
      },
      "2021-11-04": {
        "USD": 1.155399
      },
      "2021-11-05": {
        "USD": 1.155263
      },
      "2021-11-06": {
        "USD": 1.155263
      },
      "2021-11-07": {
        "USD": 1.156879
      },
      "2021-11-08": {
        "USD": 1.158763
      },
      "2021-11-09": {
        "USD": 1.159422
      },
      "2021-11-10": {
        "USD": 1.1486
      },
      "2021-11-11": {
        "USD": 1.144827
      },
      "2021-11-12": {
        "USD": 1.144308
      },
      "2021-11-13": {
        "USD": 1.144308
      },
      "2021-11-14": {
        "USD": 1.144191
      },
      "2021-11-15": {
        "USD": 1.136616
      },
      "2021-11-16": {
        "USD": 1.131791
      },
      "2021-11-17": {
        "USD": 1.131867
      },
      "2021-11-18": {
        "USD": 1.136887
      },
      "2021-11-19": {
        "USD": 1.128026
      },
      "2021-11-20": {
        "USD": 1.128026
      },
      "2021-11-21": {
        "USD": 1.12752
      },
      "2021-11-22": {
        "USD": 1.124164
      },
      "2021-11-23": {
        "USD": 1.124352
      },
      "2021-11-24": {
        "USD": 1.120273
      },
      "2021-11-25": {
        "USD": 1.120938
      },
      "2021-11-26": {
        "USD": 1.131857
      },
      "2021-11-27": {
        "USD": 1.131857
      },
      "2021-11-28": {
        "USD": 1.129133
      },
      "2021-11-29": {
        "USD": 1.129242
      },
      "2021-11-30": {
        "USD": 1.133138
      },
      "2021-12-01": {
        "USD": 1.13192
      },
      "2021-12-02": {
        "USD": 1.130614
      },
      "2021-12-03": {
        "USD": 1.131344
      },
      "2021-12-04": {
        "USD": 1.131344
      },
      "2021-12-05": {
        "USD": 1.13039
      },
      "2021-12-06": {
        "USD": 1.128394
      },
      "2021-12-07": {
        "USD": 1.127294
      },
      "2021-12-08": {
        "USD": 1.134436
      },
      "2021-12-09": {
        "USD": 1.129299
      },
      "2021-12-10": {
        "USD": 1.131676
      },
      "2021-12-11": {
        "USD": 1.131676
      },
      "2021-12-12": {
        "USD": 1.131145
      },
      "2021-12-13": {
        "USD": 1.128318
      },
      "2021-12-14": {
        "USD": 1.125752
      },
      "2021-12-15": {
        "USD": 1.129082
      },
      "2021-12-16": {
        "USD": 1.133472
      },
      "2021-12-17": {
        "USD": 1.12381
      },
      "2021-12-18": {
        "USD": 1.12381
      },
      "2021-12-19": {
        "USD": 1.124246
      },
      "2021-12-20": {
        "USD": 1.127779
      },
      "2021-12-21": {
        "USD": 1.128636
      },
      "2021-12-22": {
        "USD": 1.132761
      },
      "2021-12-23": {
        "USD": 1.132509
      },
      "2021-12-24": {
        "USD": 1.134039
      },
      "2021-12-25": {
        "USD": 1.134039
      },
      "2021-12-26": {
        "USD": 1.132362
      },
      "2021-12-27": {
        "USD": 1.132894
      },
      "2021-12-28": {
        "USD": 1.131358
      },
      "2021-12-29": {
        "USD": 1.135957
      },
      "2021-12-30": {
        "USD": 1.132375
      },
      "2021-12-31": {
        "USD": 1.137145
      },
      "2022-01-01": {
        "USD": 1.137145
      },
      "2022-01-02": {
        "USD": 1.137288
      },
      "2022-01-03": {
        "USD": 1.129982
      },
      "2022-01-04": {
        "USD": 1.128343
      },
      "2022-01-05": {
        "USD": 1.131346
      },
      "2022-01-06": {
        "USD": 1.129692
      },
      "2022-01-07": {
        "USD": 1.136169
      },
      "2022-01-08": {
        "USD": 1.136169
      },
      "2022-01-09": {
        "USD": 1.135325
      },
      "2022-01-10": {
        "USD": 1.133141
      },
      "2022-01-11": {
        "USD": 1.136619
      },
      "2022-01-12": {
        "USD": 1.144028
      },
      "2022-01-13": {
        "USD": 1.145601
      },
      "2022-01-14": {
        "USD": 1.141611
      },
      "2022-01-15": {
        "USD": 1.141611
      },
      "2022-01-16": {
        "USD": 1.141018
      },
      "2022-01-17": {
        "USD": 1.141025
      },
      "2022-01-18": {
        "USD": 1.133023
      },
      "2022-01-19": {
        "USD": 1.134308
      },
      "2022-01-20": {
        "USD": 1.131355
      },
      "2022-01-21": {
        "USD": 1.134475
      },
      "2022-01-22": {
        "USD": 1.134475
      },
      "2022-01-23": {
        "USD": 1.13404
      },
      "2022-01-24": {
        "USD": 1.132439
      },
      "2022-01-25": {
        "USD": 1.130329
      },
      "2022-01-26": {
        "USD": 1.124164
      },
      "2022-01-27": {
        "USD": 1.114461
      },
      "2022-01-28": {
        "USD": 1.114789
      },
      "2022-01-29": {
        "USD": 1.114789
      },
      "2022-01-30": {
        "USD": 1.114958
      },
      "2022-01-31": {
        "USD": 1.122952
      },
      "2022-02-01": {
        "USD": 1.12727
      },
      "2022-02-02": {
        "USD": 1.129873
      },
      "2022-02-03": {
        "USD": 1.143569
      },
      "2022-02-04": {
        "USD": 1.144945
      },
      "2022-02-05": {
        "USD": 1.144945
      },
      "2022-02-06": {
        "USD": 1.145429
      },
      "2022-02-07": {
        "USD": 1.143378
      },
      "2022-02-08": {
        "USD": 1.142015
      },
      "2022-02-09": {
        "USD": 1.142198
      },
      "2022-02-10": {
        "USD": 1.141418
      },
      "2022-02-11": {
        "USD": 1.13494
      },
      "2022-02-12": {
        "USD": 1.13494
      },
      "2022-02-13": {
        "USD": 1.136693
      },
      "2022-02-14": {
        "USD": 1.130563
      },
      "2022-02-15": {
        "USD": 1.135647
      },
      "2022-02-16": {
        "USD": 1.137333
      },
      "2022-02-17": {
        "USD": 1.136616
      },
      "2022-02-18": {
        "USD": 1.132241
      },
      "2022-02-19": {
        "USD": 1.132241
      },
      "2022-02-20": {
        "USD": 1.131663
      },
      "2022-02-21": {
        "USD": 1.130678
      },
      "2022-02-22": {
        "USD": 1.132933
      },
      "2022-02-23": {
        "USD": 1.130538
      },
      "2022-02-24": {
        "USD": 1.118942
      },
      "2022-02-25": {
        "USD": 1.127263
      },
      "2022-02-26": {
        "USD": 1.127263
      },
      "2022-02-27": {
        "USD": 1.11823
      },
      "2022-02-28": {
        "USD": 1.121554
      },
      "2022-03-01": {
        "USD": 1.113276
      },
      "2022-03-02": {
        "USD": 1.111333
      },
      "2022-03-03": {
        "USD": 1.106564
      },
      "2022-03-04": {
        "USD": 1.094769
      },
      "2022-03-05": {
        "USD": 1.094769
      },
      "2022-03-06": {
        "USD": 1.087074
      },
      "2022-03-07": {
        "USD": 1.086496
      },
      "2022-03-08": {
        "USD": 1.089657
      },
      "2022-03-09": {
        "USD": 1.107248
      },
      "2022-03-10": {
        "USD": 1.101382
      },
      "2022-03-11": {
        "USD": 1.091202
      },
      "2022-03-12": {
        "USD": 1.091202
      },
      "2022-03-13": {
        "USD": 1.093769
      },
      "2022-03-14": {
        "USD": 1.094487
      },
      "2022-03-15": {
        "USD": 1.0969
      },
      "2022-03-16": {
        "USD": 1.102232
      },
      "2022-03-17": {
        "USD": 1.109915
      },
      "2022-03-18": {
        "USD": 1.106255
      },
      "2022-03-19": {
        "USD": 1.106255
      },
      "2022-03-20": {
        "USD": 1.104179
      },
      "2022-03-21": {
        "USD": 1.101684
      },
      "2022-03-22": {
        "USD": 1.10284
      },
      "2022-03-23": {
        "USD": 1.100777
      },
      "2022-03-24": {
        "USD": 1.100921
      },
      "2022-03-25": {
        "USD": 1.098357
      },
      "2022-03-26": {
        "USD": 1.098357
      },
      "2022-03-27": {
        "USD": 1.098309
      },
      "2022-03-28": {
        "USD": 1.099348
      },
      "2022-03-29": {
        "USD": 1.109189
      },
      "2022-03-30": {
        "USD": 1.116109
      },
      "2022-03-31": {
        "USD": 1.107199
      },
      "2022-04-01": {
        "USD": 1.104845
      },
      "2022-04-02": {
        "USD": 1.104845
      },
      "2022-04-03": {
        "USD": 1.104545
      },
      "2022-04-04": {
        "USD": 1.09755
      },
      "2022-04-05": {
        "USD": 1.090691
      },
      "2022-04-06": {
        "USD": 1.089787
      },
      "2022-04-07": {
        "USD": 1.086367
      },
      "2022-04-08": {
        "USD": 1.087583
      },
      "2022-04-09": {
        "USD": 1.087583
      },
      "2022-04-10": {
        "USD": 1.088459
      },
      "2022-04-11": {
        "USD": 1.08776
      },
      "2022-04-12": {
        "USD": 1.082579
      },
      "2022-04-13": {
        "USD": 1.089621
      },
      "2022-04-14": {
        "USD": 1.082064
      },
      "2022-04-15": {
        "USD": 1.081438
      },
      "2022-04-16": {
        "USD": 1.081438
      },
      "2022-04-17": {
        "USD": 1.081484
      },
      "2022-04-18": {
        "USD": 1.078144
      },
      "2022-04-19": {
        "USD": 1.079412
      },
      "2022-04-20": {
        "USD": 1.084951
      },
      "2022-04-21": {
        "USD": 1.083482
      },
      "2022-04-22": {
        "USD": 1.079936
      },
      "2022-04-23": {
        "USD": 1.079936
      },
      "2022-04-24": {
        "USD": 1.081069
      },
      "2022-04-25": {
        "USD": 1.071387
      },
      "2022-04-26": {
        "USD": 1.064328
      },
      "2022-04-27": {
        "USD": 1.055476
      },
      "2022-04-28": {
        "USD": 1.050255
      },
      "2022-04-29": {
        "USD": 1.054463
      },
      "2022-04-30": {
        "USD": 1.054463
      },
      "2022-05-01": {
        "USD": 1.053563
      },
      "2022-05-02": {
        "USD": 1.050873
      },
      "2022-05-03": {
        "USD": 1.052743
      },
      "2022-05-04": {
        "USD": 1.062131
      },
      "2022-05-05": {
        "USD": 1.053941
      },
      "2022-05-06": {
        "USD": 1.054808
      },
      "2022-05-07": {
        "USD": 1.054808
      },
      "2022-05-08": {
        "USD": 1.05318
      },
      "2022-05-09": {
        "USD": 1.056546
      },
      "2022-05-10": {
        "USD": 1.053131
      },
      "2022-05-11": {
        "USD": 1.051215
      },
      "2022-05-12": {
        "USD": 1.037926
      },
      "2022-05-13": {
        "USD": 1.04107
      },
      "2022-05-14": {
        "USD": 1.04107
      },
      "2022-05-15": {
        "USD": 1.040031
      },
      "2022-05-16": {
        "USD": 1.043863
      },
      "2022-05-17": {
        "USD": 1.054752
      },
      "2022-05-18": {
        "USD": 1.047285
      },
      "2022-05-19": {
        "USD": 1.057865
      },
      "2022-05-20": {
        "USD": 1.056245
      },
      "2022-05-21": {
        "USD": 1.056245
      },
      "2022-05-22": {
        "USD": 1.056949
      },
      "2022-05-23": {
        "USD": 1.068171
      },
      "2022-05-24": {
        "USD": 1.07348
      },
      "2022-05-25": {
        "USD": 1.068628
      },
      "2022-05-26": {
        "USD": 1.07326
      },
      "2022-05-27": {
        "USD": 1.073532
      },
      "2022-05-28": {
        "USD": 1.073532
      },
      "2022-05-29": {
        "USD": 1.073111
      },
      "2022-05-30": {
        "USD": 1.077319
      },
      "2022-05-31": {
        "USD": 1.073376
      }
    },
    "start_date": "2021-05-31",
    "success": true,
    "timeseries": true
  };
  monthNames = ["January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December"
  ];
  startDate: string;
  endDate: string;
  loading: boolean;
  constructor(private _cc: CurrencyConverterService, private route: ActivatedRoute, private date: CustomDatePipe,
    private _snackBar: MatSnackBar) { }

  ngOnInit(): void {
    this.route.params.subscribe((params: any) => {
      this.converterId = +params.id;
      this._cc.getConvHistory.subscribe((res: any[]) => {
        if (!this.newConverterChecked)
          this.currentConverter = res.find(c => c.id === this.converterId);
        if (!this.currentConverter) this.currentConverter = JSON.parse(localStorage.getItem('lastConverter') || '');
        console.log(this.currentConverter)
        this.getHistoryRates();
      });
      setTimeout(() => {
        this.converterSelector.setPredefinedCoverter(this.currentConverter);
      }, 0);
    })
  }

  criteriaIsChanged(newConverter: Converter) {
    this.newConverterChecked = true;
    this.currentConverter = { ...newConverter };
    this.getHistoryRates();
  }

  getHistoryRates() {
    this.loading = true;
    let startYear = new Date().getFullYear() - 1;
    let endYear = new Date().getFullYear();
    let monthStart = new Date().getMonth() + 1;
    let monthEnd = new Date().getMonth();
    let dayStart = new Date(startYear, monthStart, 0).getDate();
    let dayEnd = new Date(endYear, monthEnd, 0).getDate();

    this.startDate = `${startYear}-${monthStart > 9 ? monthStart : '0' + monthStart}-${dayStart}`;
    this.endDate = `${endYear}-${monthEnd > 9 ? monthEnd : '0' + monthEnd}-${dayEnd}`;
    let data: any = [];

    this.dataSource = {
      chart: {
        "caption": `Rates for the full year`,
        "subCaption": `From [${this.startDate}] to [${this.endDate}]`,
        "xAxisName": "Months",
        "yAxisName": "Rates",
        "numberSuffix": "",
        "theme": "fusion",
      },
      data: data
    };

    Object.entries(this.dummyData.rates).forEach(([k, v]: any) => {
      let obj = { label: '', value: '' };
      let lastDay = this.date.transform(k);
      if (lastDay === k) {
        obj.label = this.monthNames[new Date(lastDay).getMonth()];
        obj.value = v[this.currentConverter.to];
        data.push(obj);
      }
    });
    return
    this._cc.getTimeseries(this.startDate, this.endDate, this.currentConverter.from, this.currentConverter.to).subscribe({
      next: (res: any) => {
        this.loading = false;

        if (res.success) {
          Object.entries(res.rates).forEach(([k, v]: any) => {
            let obj = { label: '', value: '' };
            let lastDay = this.date.transform(k);
            if (lastDay === k) {
              obj.label = this.monthNames[new Date(lastDay).getMonth()];
              obj.value = v[this.currentConverter.to];
              data.push(obj);
            }
          });
        } else {
          this._snackBar.open(res.error.info, 'Close', {
            duration: 3000,
            panelClass: 'error-alert'
          });
        }
      },
      error: (err) => {
        this.loading = false;
        this._snackBar.open('Something went wrong!', 'Close', {
          duration: 3000,
          panelClass: 'error-alert'
        });
      }
    })

  }



}
